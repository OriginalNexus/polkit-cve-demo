CFLAGS=-Wall

.PHONY: all
all: exploit exploit.so

exploit.so: exploit.c
	$(CC) $(CFLAGS) $^ -o $@ -shared -fPIC

.PHONY: clean
clean:
	rm -rf pwn exploit exploit.so GCONV_PATH=.

.PHONY: run
run:
	docker build -t polkit-cve .
	docker run -it -w /work -u attacker -h victim --rm polkit-cve

